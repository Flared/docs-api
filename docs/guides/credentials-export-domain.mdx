---
title: "Exporting a Domain's Credentials"
---


Flare's Leaked Credentials API can be used to export a domain's leaked credentials.

This guide will explain how to export all leaked credentials for the example.com domain using the
[leaksdb/identities/by_domain <Icon icon="code" size={16} />](/api-reference/leaksdb/endpoints/get-by-domain)
endpoint.


## Export Steps

<Steps>

  <Step title="Fetch one page of results">
    Use the `by_domains` endpoint to fetch one page of results.

    If this is the first page, you may omit the `from` parameter.

    If the returned page of results is empty, this means that the export is complete.
  </Step>

  <Step title="Find the highest id in the response value">
    The `by_domains` endpoint returns credentials grouped by identity.

    This means that the highest id could be in any of the returned identities.
  </Step>

  <Step title="Go back to step 1 until the response is empty">
      Using the highest returned credential id, go back to step 1 to fetch the next page.
  </Step>

</Steps>


## End-to-End Examples

These are end-to-end examples in various programming languages.

<AccordionGroup>

<Accordion title="Python Example">
```python Python
import os
import time
import csv
import sys

from flareio import FlareApiClient

api_key = os.environ.get("FLARE_API_KEY")
if not api_key:
    raise Exception("Please provide an API key")

api_client = FlareApiClient(api_key=api_key)

domain_name: str = "scatterholt.com"
from_: int = -1

writer = csv.DictWriter(
    sys.stdout,
    fieldnames=[
        "identity",
        "password",
    ],
)

while True:
    # Rate limiting.
    time.sleep(1)

    # Fetch the next page
    resp = api_client.get(
        f"https://api.flare.io/leaksdb/identities/by_domain/{domain_name}",
        params={
            "from": from_,
        },
    )
    # Stop on the first empty page.
    identities = resp.json()
    if not identities:
        break

    # Print all passwords
    for identity in identities:
        for password in identity["passwords"]:
            from_ = max(from_, password["id"])
            writer.writerow(
                {
                    "identity": identity["name"],
                    "password": password["hash"],
                },
            )
```
</Accordion>

</AccordionGroup>
